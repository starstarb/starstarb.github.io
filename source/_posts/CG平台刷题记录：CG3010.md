---
title: CG平台刷题记录：CG3010
copyright: true
tags: 算法刷题
categories: 算法刷题
abbrlink: fa24861f
date: 2019-10-28 14:34:03
---
螺旋矩阵
<!--more-->
3010. 螺旋矩阵

【题目】给定一个正整数N，生成一个N×N的矩阵，矩阵中元素取值为1～N2，1在左上角，其余各数按顺时针方向旋转前进，依次递增放置。例如，当N=4时，矩阵各元素如下：
  1   2   3  4
12 13 14  5
11 16 15  6
10   9   8  7
给定N，及矩阵中某个位置（用行坐标i和列坐标j表示，均从1开始记起），输出该位置上的元素。
【输入】输入文件中包含多个测试数据。每个测试数据占一行，为3个正整数N i j，1≤N≤100，1≤i, j≤N。输入文件最后一行为3个0，代表输入结束。
【输出】对输入文件中的每个测试数据，输出对应的元素。
```
#include <iostream>
using namespace std;
/*
模拟螺旋填数过程.
用两个变量x，y存当前填数的格子的坐标。当x=i，y=j的时候，输出当前要填的数。
如果一个格子一个格子的去填数字一定会超时，
而且在一条直线上直到转弯前需要填的格子数目是可以通过计算得出的。
只要在转弯处判断目标格子是否在当前要填的直线段上，
在的话就用已经填的格子数目加上目标格子相应坐标与当前直线段的端点坐标的差，
否则加上当前直线段所有要填的格子数目，然后转弯。
*/
int luoxuan(int n ,int x, int y){
    int xx=1,yy=1;//当前直线段  
    long long int ans = 1;//
    int a=n,b=n,c=1,d=1;//a为第n行  b为第n列 c为第1行  d为第一列 
    if(n%2==1&&(n+1)/2==x&&(n+1)/2==y)//特判n为奇数且求中心格子
        ans=n*n;//不执行 
    else {
        while(1) {
            if(xx==x&&y>=yy&&y<a) { //xx==x=1  y>=yy=1 y<4 
                ans+=(y-yy);//y是目标格子-yy当前直线段的端点坐标  ans=1+0;
                break;
            } else { //n=x=y=4
                ans+=(a-yy); //ans=1+3
                yy=a;// yy=4
            }
            a--;//3
            if(yy==y&&x>=xx&&x<b) { //yy==y=1 x>=x x<3   yy=4=y x=4>=xx=1 x<
                ans+=(x-xx);//ans=1
                break;
            } else { //
                ans+=(b-xx);//ans=4+3=7
                xx=b;//xx=4
            }
            b--;//3
            if(xx==x&&y<=yy&&y>c) {//
                ans+=(yy-y);//ans=7
                break;
            } else {
                ans+=(yy-c);
                yy=c;
            }
            c++;
            if(yy==y&&x<=xx&&x>d) {
                ans+=(xx-x);
                break;
            } else {
                ans+=(xx-d);
                xx=d+1;
                yy=c;
            }
            d++;
        }
    }
    return ans; 
}
int main() {
    int n;
    while(cin>>n){ //4 
         int x,y;//当前格子坐标 
         cin>>x>>y; //1 1  4 4
    	if(n==0&&x==0&&y==0){
    		break;
		}
		cout<<luoxuan(n,x,y)<<endl;
	}
    return 0;
}

```