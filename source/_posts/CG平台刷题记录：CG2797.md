---
title: CG平台刷题记录：CG2797
copyright: true
tags: 算法刷题
categories: 算法刷题
abbrlink: 116ae854
date: 2019-10-28 14:24:44
---
Petya and Divisors
<!--more-->
2797. Petya and Divisors

time limit per test
5 seconds
memory limit per test
256 megabytes
input
standard input
output
standard output

Little Petya loves looking for numbers' divisors. One day Petya came across the following problem:

You are given n queries in the form "xi yi". For each query Petya should count how many divisors of number xi divide none of the numbers xi-yi,xi-yi+1,...,xi-1. Help him.
Input

The first line contains an integer n (1≤n≤105). Each of the following n lines contain two space-separated integers xi and yi (1≤xi≤105, 0≤yi≤i-1, where i is the query's ordinal number; the numeration starts with 1).

If yi=0 for the query, then the answer to the query will be the number of divisors of the number xi. In this case you do not need to take the previous numbers x into consideration.
Output

For each query print the answer on a single line: the number of positive integers k such that
Examples
Input

6
4 0
3 1
5 2
6 2
18 4
10000 3

Output

3
1
1
2
2
22

Note

Let's write out the divisors that give answers for the first 5 queries:

1) 1, 2, 4

2) 3

3) 5

4) 2, 6

5) 9, 18
```
#include<iostream>
#include<string.h>
#define MAXN 100005
using namespace std;      
int last[MAXN];
/*题意：给定n对xi,yi，输出xi的因子中不是x(i-yi)到x(i-1)的所有x的因子的个数。

 思路：求每个数的因子，暴力求解(sqrt(n))的复杂度，用贪心的思想，记录下出现过的
  因子的最靠近位置i的倍数的位置，判断计数即可
*/
void query(int n){
     memset(last,0,sizeof(last));//初始化数组
      for (int t=1;t<=n;t++)//第一重循环 
      {
             int x,y;
             int ans=0;
             cin>>x>>y;
             for (int i=1;i*i<=x;i++)//第二重循环 
               if (x%i==0)//如果有约数 
               { 
                     if (t-last[i]>y) ans++;  //  距离大于了y 
                     if (x!=i*i && t-last[x/i]>y) ans++; //  另外一个约数 
                     last[i]=last[x/i]=t;//把当前约数的最后倍数赋值为当前位置 
               } 
             cout<<ans<<endl;
      } 
}
int main()
{ 
      int n; 
      cin>>n;
      query(n);
      return 0;
}
```